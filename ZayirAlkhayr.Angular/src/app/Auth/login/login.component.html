<div class="animated-bg">
    <div class="floating-shapes">
        @for (shape of shapes(); track $index) {
        <div class="shape" [style.width.px]="shape.size" [style.height.px]="shape.size" [style.top.%]="shape.top" [style.left.%]="shape.left" [style.animation-delay.s]="shape.delay">
        </div>
        }
    </div>
</div>

<div class="container">
    <div class="login-card" [class.shake]="showError()">
        <div class="logo-section">
            <div class="logo"></div>
            <h1>ุฒุงุฆุฑ ุงูุฎูุฑ</h1>
            <p class="subtitle">ูุนุง ูุตูุน ุงูุฃูู</p>
        </div>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <div class="input-wrapper">
                    <input type="email" class="input-field" placeholder="ุงุณู ุงููุณุชุฎุฏู" formControlName="email" [class.error]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
                    <span class="input-icon">๐ง</span>
                </div>
                @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                <div class="error-message">ุงุณู ุงููุณุชุฎุฏู ูุทููุจ</div>
                }
            </div>

            <div class="form-group">
                <div class="input-wrapper">
                    <input [type]="showPassword() ? 'text' : 'password'" class="input-field" placeholder="ูููุฉ ุงููุฑูุฑ" formControlName="password" [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
                    <button type="button" class="password-toggle" (click)="togglePassword()">
                {{ showPassword() ? '๐' : '๐๏ธ' }}
              </button>
                </div>
                @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                <div class="error-message">ูููุฉ ุงููุฑูุฑ ูุทููุจุฉ (6 ุฃุญุฑู ุนูู ุงูุฃูู)</div>
                }
            </div>

            @if (showError()) {
            <div class="login-error">
                ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ุบูุฑ ุตุญูุญุฉ
            </div>
            }

            <button type="submit" class="login-button" [disabled]="isLoading() || loginForm.invalid" [class.loading]="isLoading()">
            @if (isLoading()) {
              <div class="spinner"></div>
            }
            <span class="button-text">
              @if (isLoading()) {
                ุฌุงุฑู ุชุณุฌูู ุงูุฏุฎูู...
              } @else if (loginSuccess()) {
                ุชู ุจูุฌุงุญ! โ
              } @else {
                ุชุณุฌูู ุงูุฏุฎูู
              }
            </span>
          </button>
        </form>
    </div>
</div>